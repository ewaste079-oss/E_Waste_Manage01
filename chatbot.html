{% extends 'base.html' %}
{% block title %}Smart Assistant Chatbot{% endblock %}
{% block content %}

<div class="container mt-5" style="max-width: 600px;">
  <div class="card shadow p-4 rounded text-center">
  
    <!-- ðŸ‘‡ Chatbot Logo -->
    <img src="{{ url_for('static', filename='images/Chatbot_logo.jpg') }}" alt="Chatbot Logo" class="rounded-circle mb-3" style="width: 100px; height: 100px; object-fit: cover;">

    <h4 class="mb-2">ðŸ¤– Trash2Tech</h4>
    <p class="text-muted">Ask anything related to e-waste, recycling, or portal usage!</p>

    <form method="POST">
      <div class="mb-3">
        <textarea class="form-control" name="question" rows="3" placeholder="Type your question..." required></textarea>
      </div>
      <div class="d-grid">
        <button type="submit" class="btn btn-success">Ask</button>
      </div>
    </form>

    {% if response %}
    <div class="mt-4 p-3 bg-light border rounded text-start">
      <strong>ðŸ’¬ Bot:</strong>
      <p id="bot-response">{{ response }}</p>
    </div>
    {% endif %}
    
  </div>
</div>

<!-- Typing Animation -->
<script>
  const text = document.getElementById("bot-response");
  if (text) {
    const str = text.innerText;
    text.innerText = '';
    let i = 0;
    const type = () => {
      if (i < str.length) {
        text.innerText += str.charAt(i);
        i++;
        setTimeout(type, 20);
      }
    };
    type();
  }
</script>

{% endblock %}
